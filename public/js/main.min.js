function chatService(e){var a=firebase.database().ref().child("messages"),t={};return t.getMasseges=function(){return e(a)},t.filterMassages=function(){return e(a.limitToLast(15))},t.sendMassageToDB=function(e){t.getMasseges().$add(e)},t}function chatCtrl(e,a){var t=this,n=a();t.messages=e.getMasseges(),t.showLimitMassage=e.filterMassages(),n.$onAuthStateChanged(function(e){t.author=e,console.log(e)}),t.sendMassage=function(){if(null!=t.author)var a={authorName:t.author.displayName,authorId:t.author.uid,authorPhoto:t.author.photoURL,text:t.newMassage};else alert("Register now!!!");void 0!=t.newMassage?(e.sendMassageToDB(a),t.newMassage=null):alert("Typing massage!!!")},t.login=function(){n.$signInWithPopup("google")},t.logout=function(){n.$signOut()}}function enterSender(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterSender)}),a.preventDefault())})}}var config={apiKey:"AIzaSyDDBbSHfSCGDoHx2tmhEBWf2mehAMYR7mE",authDomain:"chatapp-b316c.firebaseapp.com",databaseURL:"https://chatapp-b316c.firebaseio.com",storageBucket:"chatapp-b316c.appspot.com",messagingSenderId:"724969367065"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").factory("ChatService",["$firebaseArray",chatService]),angular.module("chatApp").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").directive("enterSender",[enterSender]);